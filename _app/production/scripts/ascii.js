const X=V=>{document.documentElement.style.margin="0",document.documentElement.style.padding="0",document.documentElement.style.height="100%",document.documentElement.style.width="100%",document.body.style.margin="0",document.body.style.padding="0",document.body.style.height="100vh",document.body.style.width="100vw",document.body.style.display="flex",document.body.style.justifyContent="center",document.body.style.alignItems="center";const E="/assets/image/ascii/flower_05.png";let _=E,b=[E];const T=[{src:"flower_01.png",r:61,g:150,b:0},{src:"flower_02.png",r:85,g:160,b:100},{src:"flower_03.png",r:90,g:140,b:70},{src:"flower_04.png",r:200,g:190,b:80},{src:"flower_05.png",r:220,g:160,b:60},{src:"flower_06.png",r:240,g:130,b:50},{src:"flower_07.png",r:255,g:110,b:30},{src:"flower_08.png",r:240,g:70,b:70},{src:"flower_09.png",r:200,g:60,b:120},{src:"flower_10.png",r:170,g:50,b:150},{src:"flower_11.png",r:130,g:60,b:170},{src:"flower_12.png",r:90,g:70,b:180},{src:"flower_13.png",r:60,g:90,b:200},{src:"flower_14.png",r:150,g:150,b:190}];let C=null;function A(d,n){return Math.sqrt(Math.pow(d.r-n.r,2)+Math.pow(d.g-n.g,2)+Math.pow(d.b-n.b,2))}function O(d){const y=T.map(t=>({dist:A(t,d),src:t.src})).sort((t,s)=>t.dist-s.dist).slice(0,5),g=y.filter(t=>{const s="/assets/image/ascii/"+t.src;return s!==_&&!b.includes(s)}),p=g.length>0?g[Math.floor(Math.random()*g.length)]:y.find(t=>"/assets/image/ascii/"+t.src!==_)||y[0],m="/assets/image/ascii/"+p.src;return b.push(m),b.length>3&&b.shift(),p.src}function S(d){let n=!1,y=[],g=0;const p=document.createElement("canvas");p.width=30,p.height=30,p.style.display="none";const m=p.getContext("2d");document.body.appendChild(p);const t=new Image;t.crossOrigin="Anonymous",t.src=d,t.onload=()=>{m.drawImage(t,0,0,30,30),R(),$(()=>{})};const s=document.createElement("div");s.style.position="relative",s.style.width="300px",s.style.height="300px",document.body.appendChild(s);const o=document.createElement("div");o.style.width="100%",o.style.height="100%",o.style.backgroundImage=`url(${d})`,o.style.backgroundSize="300px 300px",o.style.backgroundPosition="center",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.zIndex="1",s.appendChild(o);const a=document.createElement("div");a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.width="300px",a.style.height="300px",a.style.zIndex="2",s.appendChild(a);const r=document.createElement("div");r.style.position="absolute",r.style.top="0",r.style.left="0",r.style.width="300px",r.style.height="300px",r.style.zIndex="4",s.appendChild(r);function R(){a.innerHTML="",r.innerHTML="",y=[],g=0;const c=m.getImageData(0,0,30,30).data;for(let u=0;u<30;u++)for(let i=0;i<30;i++){const h=(u*30+i)*4,z=c[h],P=c[h+1],k=c[h+2],j=c[h+3]/255,e=document.createElement("div");e.style.position="absolute",e.style.width="10px",e.style.height="10px",e.style.left=`${i*10}px`,e.style.top=`${u*10}px`,e.style.backgroundColor=`rgba(${z},${P},${k},${j})`,e.style.opacity="0",e.style.transform="scale(0)",e.style.transition="transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55), opacity 0.4s",e.style.pointerEvents="none",e.style.zIndex="3",a.appendChild(e);const l=document.createElement("div");l.style.position="absolute",l.style.width="10px",l.style.height="10px",l.style.left=`${i*10}px`,l.style.top=`${u*10}px`,l.style.zIndex="4",l.addEventListener("mouseenter",()=>{e.style.zIndex="9999",e.style.transform="scale(4.5)",e.style.opacity="1",C={r:z,g:P,b:k}}),l.addEventListener("mouseleave",()=>{e.style.zIndex="3",e.style.transform=n?"scale(1)":"scale(0)",n||(e.style.opacity="0")}),l.addEventListener("click",B=>{if(B.stopPropagation(),!C)return;const L=`/assets/image/ascii/${O(C)}`;_=L;const x=new Image;x.crossOrigin="Anonymous",x.onload=()=>{m.clearRect(0,0,30,30),m.drawImage(x,0,0,30,30);const w=m.getImageData(0,0,30,30).data;for(let f=0;f<30;f++)for(let I=0;I<30;I++){const v=(I*30+f)*4,F=w[v],J=w[v+1],K=w[v+2],N=w[v+3]/255,Q=I*30+f,{el:M}=y[Q],U=f*30+Math.floor(Math.random()*200);setTimeout(()=>{M.style.opacity="1",M.style.transform="scale(1)",M.style.backgroundColor=`rgba(${F},${J},${K},${N})`},U)}},x.src=L}),r.appendChild(l);const q=i*30,G=Math.floor(Math.random()*200),D=q+G;y.push({el:e,delay:D}),g=Math.max(g,D)}}function H(c,u){y.forEach(({el:i,delay:h})=>{setTimeout(()=>{i.style.opacity=c?"1":"0",i.style.transform=c?"scale(1)":"scale(0)"},h)}),setTimeout(u,g+300)}function $(c){H(!n,c),n=!n}return $}S(E)};export{X as default};
